<script id="skup-voyager" data-item="collection" type="application/json">{% assign count = shop.metafields.voyager.size %}{"upsells":[{% for i in (1..count) %}{% assign key = 'upsell_' | append: i %}{% if shop.metafields.voyager[key] %}{% for upsell in shop.metafields.voyager[key] %}{{ upsell | json}}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}{% endif %}{% endfor %}],"products":[{% for product in products limit: limit %}{"product_id":{{ product.id }},"collections":[{% for collection in product.collections %}{"id" : {{ collection.id }},"handle":"{{ collection.handle }}"}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}]}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}]}
</script>
